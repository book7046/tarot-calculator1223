<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¸ƒå…‹å¡”ç¾…ç‰Œå åœ</title>
  
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#1e3c72">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="color-scheme" content="light">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="theme_force.css">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-512x512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-192x192.png">

   <style>
    body { font-family: 'Noto Sans TC', sans-serif; }
    
    /* å¡ç‰‡æ¨£å¼ */
    .rws-card-frame{position:relative;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0; flex-direction: column;}
    .rws-img{width:8rem;height:auto;border-radius:.5rem;box-shadow:0 8px 24px rgba(0,0,0,.3); transition: transform 0.3s;}
    .rws-img.sm{width:4rem}.rws-img.md{width:6rem}.rws-img.lg{width:8rem}.rws-img.xl{width:12rem}
    .rws-reversed{transform:rotate(180deg)}
    /* éŒ¯èª¤è™•ç†æ¨£å¼ */
    .rws-fallback{display:none;width:100%;height:100%;min-height:120px;border-radius:.5rem;background:linear-gradient(135deg,rgba(253,224,71,.12),rgba(59,130,246,.12));border:1px solid rgba(253,224,71,.25);padding:.5rem;text-align:center;justify-content:center;align-items:center;flex-direction:column}
    .rws-card-frame.no-img .rws-fallback{display:flex}
    .rws-card-frame.no-img .rws-img { display: none; }

    /* æ‰‡å½¢æŠ½ç‰Œå€ (ä¿ç•™åŸæ¨£) */
    .fan-container { position: relative; width: 100%; height: 500px; display: flex; justify-content: center; align-items: center; overflow: hidden; }
    .fan-card { position: absolute; width: 60px; height: 90px; transition: all 0.3s ease; transform-origin: bottom center; cursor: pointer; }
    .fan-card:hover { transform: translateY(-20px) scale(1.1); z-index: 100; }
    .fan-card.selected { opacity: 0.3; pointer-events: none; }
    
    /* è¦–è¦ºåŒ–ç‰Œé™£å°ˆç”¨æ¨£å¼ */
    .spread-grid-label { font-size: 0.75rem; color: #fef08a; text-align: center; margin-top: 0.25rem; text-shadow: 0 1px 2px rgba(0,0,0,0.8); white-space: nowrap; }
    .visual-card-container { display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
  </style>
</head>
<body class="mystical-bg min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-8 relative">
            <h1 class="text-4xl font-bold mb-2 text-yellow-300">ğŸ”® å¸ƒå…‹å¡”ç¾…</h1>
            <p class="text-lg text-blue-200">å‰ç‰¹å¡”ç¾…ç‰Œå åœç³»çµ±</p>
            <button id="installAppBtn" class="hidden mt-4 bg-white/10 hover:bg-white/20 text-yellow-300 border border-yellow-300/30 px-4 py-2 rounded-full text-sm transition-all">
                ğŸ“² å®‰è£åˆ°æ¡Œé¢
            </button>
        </div>

        <div id="typeSection" class="max-w-2xl mx-auto mb-8 bg-white/10 backdrop-blur-sm rounded-lg p-6">
            <h2 class="text-2xl font-semibold mb-4 text-center">âœ¨ è«‹é¸æ“‡å•é¡Œé¡å‹</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button class="type-option bg-white/20 hover:bg-white/30 p-6 rounded-lg border border-yellow-300/30 transition-all text-left" data-type="choice">
                    <div class="text-xl mb-1">âš–ï¸ é¸æ“‡æ€§å•é¡Œ</div>
                    <div class="text-xs text-blue-200">ç”Ÿæ´»ä¸Šé‡åˆ°é¸æ“‡ä¸Šçš„é›£é¡Œæ™‚ä½¿ç”¨</div>
                </button>
                <button class="type-option bg-white/20 hover:bg-white/30 p-6 rounded-lg border border-yellow-300/30 transition-all text-left" data-type="advice">
                    <div class="text-xl mb-1">ğŸ’Š æ±‚å»ºè­°å•é¡Œ</div>
                    <div class="text-xs text-blue-200">ä¸€ä»¶äº‹ä¸æ›‰å¾—å¾ä½•è‘—æ‰‹æ™‚é©ç”¨(æ›´é«˜ä¸€å±¤çš„è‡ªå·±çµ¦çš„æœ€é©åˆçš„è§£ç­”)</div>
                </button>
                <button class="type-option bg-white/20 hover:bg-white/30 p-6 rounded-lg border border-yellow-300/30 transition-all text-left" data-type="result">
                    <div class="text-xl mb-1">ğŸ“ˆ éœ€è¦çµæœçš„å•é¡Œ</div>
                    <div class="text-xs text-blue-200">ä»»ä½•æƒ³çŸ¥é“çµæœçš„å•é¡Œéƒ½å¯ä»¥ä½¿ç”¨</div>
                </button>
                <button class="type-option bg-white/20 hover:bg-white/30 p-6 rounded-lg border border-yellow-300/30 transition-all text-left" data-type="relationship">
                    <div class="text-xl mb-1">ğŸ¤ æ„Ÿæƒ…åˆä½œé¡å•é¡Œ</div>
                    <div class="text-xs text-blue-200">ä»»ä½•äººèˆ‡äººä¹‹é–“çš„æƒ…æ„Ÿé—œä¿‚,åˆä½œé—œä¿‚,æˆ–äº‹æƒ…éƒ½å¯ä»¥ä½¿ç”¨</div>
                </button>
                <button class="type-option bg-white/20 hover:bg-white/30 p-6 rounded-lg border border-yellow-300/30 transition-all text-left md:col-span-2" data-type="period">
                    <div class="text-xl mb-1">ğŸ“… é‹å‹¢å åœ (æ—¥/é€±/æœˆ/å¹´)</div>
                    <div class="text-xs text-blue-200">æ¯æ—¥ã€æ¯é€±ã€æ¯æœˆã€æ¯å¹´é‹å‹¢åˆ†æ</div>
                </button>
            </div>
        </div>

        <div id="questionSection" class="max-w-2xl mx-auto mb-8 bg-white/10 backdrop-blur-sm rounded-lg p-6 hidden">
            <h2 class="text-2xl font-semibold mb-4 text-center">âœ¨ è«‹è¼¸å…¥ä½ çš„å•é¡Œ</h2>
            <div id="questionExample" class="text-sm text-yellow-200 mb-4 bg-yellow-500/10 p-4 rounded border border-yellow-500/20 italic">
                </div>
            <p class="text-center text-blue-200 text-sm mb-4">è«‹åœ¨å¿ƒä¸­é»˜å¿µä¸‰æ¬¡ï¼Œä¿æŒå°ˆæ³¨</p>
            <textarea id="questionInput" placeholder="åœ¨æ­¤è¼¸å…¥ä½ æƒ³è¦å åœçš„å•é¡Œ..." class="w-full h-32 p-4 rounded-lg bg-white/20 backdrop-blur-sm border border-yellow-300/50 text-white resize-none focus:outline-none focus:ring-2 focus:ring-yellow-300"></textarea>
            <div class="flex gap-4">
                <button id="backToTypeBtn" class="flex-1 mt-4 bg-white/10 hover:bg-white/20 text-white py-3 px-6 rounded-lg border border-white/20">å›ä¸Šä¸€æ­¥</button>
                <button id="nextBtn" class="flex-[2] mt-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 glow">ä¸‹ä¸€æ­¥ - é¸æ“‡ç‰Œé™£</button>
            </div>
        </div>

        <div id="spreadSection" class="max-w-4xl mx-auto mb-8 hidden">
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="timeflow">
                    <h3 class="text-lg font-semibold mb-2">æ™‚é–“ä¹‹æµ</h3><p class="text-sm text-blue-200">ä»»ä½•æƒ³çŸ¥é“çµæœçš„å•é¡Œéƒ½å¯ä»¥ä½¿ç”¨</p>
					<div class="flex justify-center space-x-2 mt-2">
                        <div class="w-6 h-8 bg-purple-500/50 border border-yellow-300 rounded"></div>
                        <div class="w-6 h-8 bg-purple-500/50 border border-yellow-300 rounded"></div>
                        <div class="w-6 h-8 bg-purple-500/50 border border-yellow-300 rounded"></div>
                    </div>						  
                </div>
				<div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="davidstar">
                    <h3 class="text-lg font-semibold mb-2">å¤§è¡›ä¹‹æ˜Ÿ</h3><p class="text-sm text-blue-200">æ™‚é–“ä¹‹æµé€²éšç‰ˆï¼Œæ·±å…¥æ¢è¨ç’°å¢ƒèˆ‡å°ç­–</p>
					<div class="flex justify-center">
                        <div class="relative w-16 h-16">
                            <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute top-3 left-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute top-3 right-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute bottom-3 left-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                            <div class="absolute bottom-3 right-1 w-3 h-4 bg-gradient-to-b from-blue-400 to-blue-600 rounded border border-yellow-300"></div>
                        </div>
                    </div>							 
                </div>
				<div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="ushape">
                    <h3 class="text-lg font-semibold mb-2">Uå‹ç‰Œé™£</h3><p class="text-sm text-blue-200">ç•¶æƒ³å¾—åˆ°æœªä¾†,æ…£æ€§æ”¹è®Š,å›°é›£é»çš„ç·šç´¢æ™‚æ–¹å¯ä½¿ç”¨</p>
                    <div class="flex justify-center">
                        <div class="flex items-end gap-1">
                            <div class="flex flex-col gap-1">
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                            </div>
                            <div class="flex items-end"><div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div></div>
                            <div class="flex flex-col gap-1">
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                                <div class="w-3 h-5 bg-gradient-to-b from-green-400 to-green-600 rounded border border-yellow-300"></div>
                            </div>
                        </div>
                    </div>
                </div>								  
				<div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="choice">
                    <h3 class="text-lg font-semibold mb-2">é¸æ“‡ç‰Œé™£</h3><p class="text-sm text-blue-200">ç”Ÿæ´»ä¸Šé‡åˆ°é¸æ“‡ä¸Šçš„é›£é¡Œæ™‚ä½¿ç”¨</p>
			       <div class="flex justify-center">
                        <div class="flex flex-col items-center gap-1">
                            <div class="flex gap-4">
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                            </div>
                            <div class="flex gap-2">
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                                <div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div>
                            </div>
                            <div class="flex gap-1"><div class="w-4 h-6 bg-gradient-to-b from-orange-400 to-orange-600 rounded border border-yellow-300"></div></div>
                        </div>
                    </div>						  
                </div>
				<div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="relationship">
                    <h3 class="text-lg font-semibold mb-2">é—œä¿‚ç‰Œé™£</h3><p class="text-sm text-blue-200">ä»»ä½•äººèˆ‡äººä¹‹é–“çš„æƒ…æ„Ÿé—œä¿‚,åˆä½œé—œä¿‚,æˆ–äº‹æƒ…éƒ½å¯ä»¥ä½¿ç”¨</p>
					<div class="flex justify-center">
                        <div class="flex flex-col items-center gap-1">
                            <div class="flex justify-center"><div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div></div>
                            <div class="flex justify-center"><div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div></div>
                            <div class="flex gap-2">
                                <div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div>
                                <div class="w-4 h-6 bg-gradient-to-b from-pink-400 to-pink-600 rounded border border-yellow-300"></div>
                            </div>
                        </div>
                    </div>	    
                </div>
				<div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="advice">
                    <h3 class="text-lg font-semibold mb-2">å»ºè­°ç‰Œé™£</h3><p class="text-sm text-blue-200">ä¸€ä»¶äº‹ä¸æ›‰å¾—å¾ä½•è‘—æ‰‹æ™‚é©ç”¨(æ›´é«˜ä¸€å±¤çš„è‡ªå·±çµ¦çš„æœ€é©åˆçš„è§£ç­”)</p>
					<div class="flex justify-center space-x-2">
                        <div class="w-8 h-12 bg-gradient-to-b from-teal-400 to-teal-600 rounded border border-yellow-300"></div>
                        <div class="w-8 h-12 bg-gradient-to-b from-teal-400 to-teal-600 rounded border border-yellow-300"></div>
                    </div>			
				</div>

                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="period_1">
                    <h3 class="text-lg font-semibold mb-2">å–®ä¸€é‹å‹¢</h3><p class="text-sm text-blue-200">å–®æ—¥/é€±/æœˆ/å¹´æ•´é«”é‹å‹¢ (1å¼µ)</p>
                    <div class="flex justify-center mt-2"><div class="w-6 h-8 bg-yellow-500/50 border border-yellow-300 rounded"></div></div>
                </div>
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="period_7">
                    <h3 class="text-lg font-semibold mb-2">ä¸€é€±é‹å‹¢</h3><p class="text-sm text-blue-200">é€±ä¸€è‡³é€±æ—¥é‹å‹¢ (7å¼µ)</p>
                    <div class="flex justify-center mt-2 gap-1"><span class="text-xs">Mon-Sun</span></div>
                </div>
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="period_3">
                    <h3 class="text-lg font-semibold mb-2">ä¸€å­£é‹å‹¢</h3><p class="text-sm text-blue-200">ä¸‰å€‹æœˆè©³ç´°é‹å‹¢ (3å¼µ)</p>
                    <div class="flex justify-center mt-2 gap-1">
                        <div class="w-4 h-6 bg-green-500/50 border border-yellow-300"></div>
                        <div class="w-4 h-6 bg-green-500/50 border border-yellow-300"></div>
                        <div class="w-4 h-6 bg-green-500/50 border border-yellow-300"></div>
                    </div>
                </div>
                <div class="spread-option bg-white/20 backdrop-blur-sm rounded-lg p-4 cursor-pointer hover:bg-white/30 transition-all duration-300 border border-yellow-300/50" data-spread="period_12">
                    <h3 class="text-lg font-semibold mb-2">æµå¹´é‹å‹¢</h3><p class="text-sm text-blue-200">1æœˆè‡³12æœˆè©³ç´°é‹å‹¢ (12å¼µ)</p>
                    <div class="flex justify-center mt-2"><div class="grid grid-cols-4 gap-0.5 w-12 h-8 bg-blue-500/20"></div></div>
                </div>
            </div>
            <div class="text-center mt-8">
                <button id="backToQuestionBtn" class="bg-white/10 hover:bg-white/20 text-white py-2 px-6 rounded-lg border border-white/20">å›ä¸Šä¸€æ­¥</button>
            </div>
        </div>

        <div id="shuffleSection" class="max-w-4xl mx-auto mb-8 hidden">
            <div class="text-center mb-6"><h2 class="text-2xl font-semibold mb-2">ğŸ”„ æ´—ç‰Œèˆ‡åˆ‡ç‰Œ</h2></div>
            <div class="bg-white/10 backdrop-blur-sm rounded-lg p-8 text-center">
                <div id="shuffleDeck" class="inline-block relative mb-6">
                    <div class="w-32 h-48 card-back rounded-lg flex items-center justify-center text-4xl cursor-pointer hover:scale-105 transition-transform duration-300 glow">ğŸŒŸ</div>
                </div>
                <div class="space-y-4">
                    <button id="shuffleCardsBtn" class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-semibold py-3 px-8 rounded-lg glow">ğŸ”„ æ´—ç‰Œ (<span id="shuffleCount">3</span>)</button>
                    <button id="cutCardsBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold py-3 px-8 rounded-lg hidden">âœ‚ï¸ åˆ‡ç‰Œ</button>
                </div>
            </div>
        </div>

        <div id="mindsetSection" class="max-w-4xl mx-auto mb-8 hidden">
            <div class="text-center mb-6"><h2 class="text-2xl font-semibold mb-2">ğŸ’­ å¿ƒæ…‹ç‰Œ</h2></div>
            <div id="mindsetCard" class="bg-white/10 backdrop-blur-sm rounded-lg p-6"></div>
            <div class="text-center mt-6">
                <button id="proceedToDrawBtn" class="bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold py-3 px-8 rounded-lg glow">ç¹¼çºŒæŠ½ç‰Œ â¡ï¸</button>
            </div>
        </div>

        <div id="drawSection" class="max-w-6xl mx-auto mb-8 hidden">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-semibold mb-2">ğŸ´ è«‹æŠ½å–ä½ çš„ç‰Œ</h2>
                <p class="text-sm text-yellow-300 mt-2">é‚„éœ€æŠ½å– <span id="cardsNeeded">1</span> å¼µ</p>
            </div>
            <div class="fan-container mb-8"><div id="cardDeck"></div></div>
            <div class="text-center">
                <button id="revealBtn" class="bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold py-2 px-6 rounded-lg hidden">âœ¨ æŸ¥çœ‹çµæœ</button>
            </div>
        </div>

        <div id="resultSection" class="max-w-6xl mx-auto hidden pb-20">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-semibold mb-2">ğŸŒŸ å åœçµæœ</h2>
                <div id="questionDisplay" class="text-lg text-yellow-300 mb-2 font-medium"></div>
                <div id="spreadName" class="text-blue-200 text-sm"></div>
            </div>
            
            <div id="resultMindsetCard" class="mb-10"></div>
            
            <div class="mb-4 text-center text-xl font-bold text-yellow-300">ğŸ´ ç‰Œé™£ä¸€è¦½</div>
            <div id="resultSpreadVisual" class="mb-12 flex justify-center items-center overflow-x-auto min-h-[350px] p-6 bg-white/5 rounded-xl border border-white/10 shadow-inner relative">
                </div>

            <div class="mb-4 text-center text-xl font-bold text-yellow-300">ğŸ“– è©³ç´°è§£èªª</div>
            <div id="resultCards" class="grid grid-cols-1 gap-6 mb-8"></div>
            
            <div class="text-center mt-12">
                <button id="newReadingBtn" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 px-8 rounded-lg glow shadow-lg transform hover:scale-105 transition-all">ğŸ”® é–‹å§‹æ–°çš„å åœ</button>
            </div>
        </div>
    </div>

    <script src="assets/js/tarot-data.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./service-worker.js').catch(console.error);
        });
      }
    </script>
</body>
</html>